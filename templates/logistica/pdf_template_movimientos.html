<!DOCTYPE html>
<html>
<head>
    <style>
        /* ESTA ES LA REGLA PARA GIRAR LA HOJA */
        @page {
            size: A4 landscape;
            margin: 1cm;
        }

        body { 
            font-family: Helvetica, sans-serif; 
            font-size: 10px; 
            margin: 0;
            padding: 0;
        }

        .titulo { text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 15px; }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            /* Quitamos table-layout: fixed para que las columnas se adapten al contenido */
        }
        
        th, td { 
            border: 0.5px solid #000; 
            padding: 4px 2px; /* Un poco m√°s de aire ahora que hay espacio */
            text-align: left; 
            font-size: 9px; 
        }

        th { background-color: #f2f2f2; }

        /* Definimos anchos sugeridos para que se vea ordenado */
        .col-articulo { width: 20%; }
        .col-tipo { width: 10%; }
        .col-cantidad { width: 5%; text-align: center; }

        .firma-box { margin-top: 30px; text-align: center; width: 250px; }
        .firma-img { width: 200px; height: auto; border-bottom: 1px solid #000; }
        .firma-box p { margin: 2px 0; font-size: 9px; }
    </style>
</head>
<body>
    <div class="titulo">ACTA DE MOVIMIENTOS #{{ cabecera.id_cabezera }}</div>
    
    <p><strong>Colaborador:</strong> {{ cabecera.colaborador_confirma.nombre_colaborador }}</p>
    <p><strong>Fecha:</strong> {{ cabecera.fecha|date:"d/m/Y H:i" }}</p>

    <table>
        <thead>
            <tr>
                <th>Articulo</th>
                <th>TipMovimiento</th>
                <th>Origen</th>
                <th>Destino</th>
                <th>Cantidad</th>
                <th>MovReferencia</th>
                <th>Observaciones</th>
            </tr>
        </thead>
        <tbody>
            {% for movimiento in movimientos %}
            <tr>
                <td>{{ movimiento.id_item.nombre_item }}</td>
                <td>{{ movimiento.tipo_movimiento.nombre_movimiento }}</td>
                <td>{{ movimiento.nombre_origen }}</td>
                <td>{{ movimiento.nombre_destino }}</td>
                <td>{{ movimiento.cantidad_movimiento }}</td>
                <td>{{ movimiento.id_movimiento_referencia }}</td>                
                <td>{{ movimiento.observaciones }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="firma-box">
        <img src="{{ cabecera.firma_base64 }}" class="firma-img">
        <p>Firma del Colaborador</p>
        <p><small>HASH: {{ cabecera.hash_seguridad }}</small></p>
    </div>
</body>
</html>